<!DOCTYPE html>
<html>
<head>
    <title>4D Tessaract Encryptor/Decryptor</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; }
        button { padding: 8px 15px; margin-right: 10px; }
        .cube { display: inline-block; margin: 10px; vertical-align: top; }
        table { border-collapse: collapse; }
        td { width: 25px; height: 25px; border: 1px solid #000; text-align: center; font-size: 12px; }
        .highlight { background-color: yellow; }
    </style>
</head>
<body>
    <h2>4D Tessaract Encryptor/Decryptor</h2>
    
    <div>
        <textarea id="input" placeholder="Enter text"></textarea><br>
        <button onclick="encrypt()">Encrypt</button>
        <button onclick="decrypt()">Decrypt</button>
        <button onclick="clearAll()">Clear</button>
    </div>
    
    <div>
        <strong>Result:</strong>
        <div id="output"></div>
    </div>
    
    <div id="cubes"></div>

    <script>
        // Alphabet definition
        const cubes = [
            [ // Latin (W=1)
                ['A','B','C','D','E','F','G','H','I'], // Z=1
                ['J','K','L','M','N','O','P','Q','R'], // Z=2
                ['S','T','U','V','W','X','Y','Z',' ']  // Z=3
            ],
            [ // Cyrillic (W=2)
                ['А','Б','В','Г','Д','Е','Ж','З','И'],
                ['Й','К','Л','М','Н','О','П','Р','С'],
                ['Т','У','Ф','Х','Ц','Ч','Ш','Щ','Ъ']
            ],
            [ // Symbols (W=3)
                ['1','2','3','4','5','6','7','8','9'],
                ['!','@','#','$','%','^','&','*','('],
                [')','-','+','=','/','?','|','~','§']
            ]
        ];

        // Initialize cubes
        function initCubes() {
            let html = '';
            for (let w = 0; w < 3; w++) {
                html += `<div class="cube"><h3>Cube W=${w+1}</h3>`;
                for (let z = 0; z < 3; z++) {
                    html += `<div>Layer Z=${z+1}<table id="w${w+1}z${z+1}">`;
                    for (let y = 0; y < 3; y++) {
                        html += '<tr>';
                        for (let x = 0; x < 3; x++) {
                            const char = cubes[w][z][y*3 + x];
                            html += `<td onclick="showCoords(${x+1},${y+1},${z+1},${w+1})">${char}</td>`;
                        }
                        html += '</tr>';
                    }
                    html += '</table></div>';
                }
                html += '</div>';
            }
            document.getElementById('cubes').innerHTML = html;
        }

        // Find character coordinates
        function findChar(c) {
            for (let w = 0; w < 3; w++) {
                for (let z = 0; z < 3; z++) {
                    for (let y = 0; y < 3; y++) {
                        for (let x = 0; x < 3; x++) {
                            if (cubes[w][z][y*3 + x] === c) {
                                return { x: x+1, y: y+1, z: z+1, w: w+1 };
                            }
                        }
                    }
                }
            }
            return null;
        }

        // Get character from coordinates
        function getChar(x, y, z, w) {
            return cubes[w-1][z-1][(y-1)*3 + (x-1)] || '?';
        }

        // Encryption: (x,y,z,w) → (y,w,x,z)
        function encrypt() {
            const input = document.getElementById('input').value.toUpperCase();
            let output = '';
            
            for (const char of input) {
                const coords = findChar(char);
                if (coords) {
                    const encrypted = getChar(coords.y, coords.w, coords.x, coords.z);
                    output += encrypted;
                } else {
                    output += '?';
                }
            }
            
            document.getElementById('output').textContent = output;
        }

        // Decryption: (y,w,x,z) → (x,y,z,w)
        function decrypt() {
            const input = document.getElementById('input').value;
            let output = '';
            
            for (const char of input) {
                const coords = findChar(char);
                if (coords) {
                    const decrypted = getChar(coords.z, coords.x, coords.w, coords.y);
                    output += decrypted;
                } else {
                    output += '?';
                }
            }
            
            document.getElementById('output').textContent = output;
        }

        // Clear all
        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').textContent = '';
        }

        // Show coordinates
        function showCoords(x, y, z, w) {
            alert(`Char: ${getChar(x,y,z,w)}\nCoords: (${x},${y},${z},${w})`);
        }

        // Initialize
        window.onload = initCubes;
    </script>
</body>
</html>
